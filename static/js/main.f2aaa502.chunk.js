(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(39)},35:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(17),s=n.n(c),u=n(8),i=n(23),o=n(5),p={inputRef:{},autocompletePlanets:[],searchInputValue:"",isFetching:!1,isAutocompleteListOpen:!1};n(32);var l=n(26),E=n(6),h=n.n(E),f=n(4),O=h.a.mark(C),m=h.a.mark(P),d=h.a.mark(j),b=h.a.mark(v);function C(){var e,t;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(f.h)("INPUT_CHANGED");case 3:if(!(e=n.sent).payload.trim()){n.next=14;break}return n.next=7,Object(f.f)(j,e);case 7:return t=n.sent,n.next=10,Object(f.h)(["INPUT_CLEARED","INPUT_CHANGE","POPUP_OUTSIDE_CLICKED"]);case 10:return n.next=12,Object(f.c)(t);case 12:n.next=16;break;case 14:return n.next=16,Object(f.g)({type:"INPUT_EMPTY"});case 16:n.next=0;break;case 18:case"end":return n.stop()}},O)}function P(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(f.h)("INPUT_CHANGE");case 3:return e=t.sent,t.next=6,Object(f.g)({type:"INPUT_CHANGED",payload:e.payload});case 6:t.next=0;break;case 8:case"end":return t.stop()}},m)}function j(e){var t,n,a;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,t=!0,n=h.a.mark(function n(){var a,r,c;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payload){n.next=2;break}return n.abrupt("return",{v:void 0});case 2:return n.next=4,Object(f.e)(400);case 4:a="https://swapi.co/api/planets/?search=".concat(e.payload.trim()),r=!0;case 5:if(!r){n.next=16;break}return n.next=8,Object(f.g)({type:"PLANETS_PAGE_FETCH_START"});case 8:return n.next=10,Object(f.b)(function(){return fetch(a).then(function(e){return e.json()})});case 10:return c=n.sent,n.next=13,Object(f.g)({type:"PLANETS_PAGE_FETCHED",payload:c.results});case 13:c.next?a=c.next:r=!1,n.next=5;break;case 16:return n.next=18,Object(f.g)({type:"ALL_PLANETS_FETCHED"});case 18:t=!1;case 19:case"end":return n.stop()}},n)});case 3:if(!t){r.next=10;break}return r.delegateYield(n(),"t0",5);case 5:if("object"!==typeof(a=r.t0)){r.next=8;break}return r.abrupt("return",a.v);case 8:r.next=3;break;case 10:r.next=16;break;case 12:return r.prev=12,r.t1=r.catch(0),r.next=16,Object(f.g)({type:"PLANET_FETCH_ERRORED",e:r.t1});case 16:return r.prev=16,r.next=19,Object(f.d)();case 19:if(!r.sent){r.next=22;break}return r.next=22,Object(f.g)({type:"PLANET_FETCH_ABORTED"});case 22:return r.finish(16);case 23:case"end":return r.stop()}},d,null,[[0,12,16,23]])}function v(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([C(),P()]);case 2:case"end":return e.stop()}},b)}var T=Object(l.a)(),_=Object(u.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_CHANGED":return Object(o.a)({},e,{searchInputValue:t.payload,isFetching:!0,autocompletePlanets:[]});case"INPUT_EMPTY":return Object(o.a)({},e,{isFetching:!1});case"INPUT_CLEARED":return Object(o.a)({},e,{searchInputValue:""});case"POPUP_OUTSIDE_CLICKED":return Object(o.a)({},e,{isAutocompleteListOpen:!1});case"PLANETS_PAGE_FETCH_START":return Object(o.a)({},e,{isAutocompleteListOpen:!0});case"PLANETS_PAGE_FETCHED":return Object(o.a)({},e,{autocompletePlanets:[].concat(Object(i.a)(e.autocompletePlanets),Object(i.a)(t.payload))});case"ALL_PLANETS_FETCHED":return Object(o.a)({},e,{isFetching:!1,isAutocompleteListOpen:!0});case"PLANET_FETCH_ABORTED":return Object(o.a)({},e,{isFetching:!1,autocompletePlanets:[]});case"PLANET_FETCH_ERRORED":return Object(o.a)({},e,{isFetching:!1,autocompletePlanets:["Error"]});case"INPUT_REF_CREATED":return Object(o.a)({},e,{inputRef:t.payload});case"AUTOCOMPLETE_OPTION_CLICKED":return Object(o.a)({},e,{searchInputValue:t.payload,autocompletePlanets:[],isAutocompleteListOpen:!1});default:return e}},p,Object(u.a)(T));T.run(v);n(35);var A=n(11),x=n(12),g=n(15),y=n(13),L=n(16),I=n(14),k=function(e){return{type:"INPUT_CHANGE",payload:e}},N=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleInput=function(e){e.target.value?n.props.inputChange(e.target.value):n.props.inputChange("")},n.handleClick=function(e){n.props.inputClear(),n.inputRef.current.focus()},n.inputRef=r.a.createRef(),n.state={active:!0},n}return Object(L.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus(),this.props.pushAutocompleteRef(this.inputRef.current.getBoundingClientRect()),window.a=this.inputRef.current}},{key:"render",value:function(){var e=this,t=this.state.active||this.props.searchInputValue;return r.a.createElement("div",{className:"field ".concat(t?"active":"")},r.a.createElement("input",{ref:this.inputRef,type:"text",id:"searchInput",value:this.props.searchInputValue,onChange:this.handleInput,onFocus:function(){return e.setState({active:!0})},onBlur:function(){return e.setState({active:!1})},placeholder:this.state.active?"":"Star Wars Planets"}),r.a.createElement("label",{htmlFor:"searchInput"},"Star Wars Planets"),this.props.searchInputValue&&r.a.createElement("button",{onClick:this.handleClick,className:"close"}),this.props.isFetching&&r.a.createElement("div",{className:"spinner"}))}}]),t}(a.Component),R={inputChange:k,inputClear:function(){return{type:"INPUT_CLEARED"}},pushAutocompleteRef:function(e){return{type:"INPUT_REF_CREATED",payload:e}}},w=Object(I.b)(function(e){return{searchInputValue:e.searchInputValue,isFetching:e.isFetching}},R)(N);var F=function(e){return"Error"===e.planetList[0]?r.a.createElement("ul",null,r.a.createElement("li",null,"Something went wrong")):e.isFetching?null:0===e.planetList.length?r.a.createElement("ul",null,r.a.createElement("li",null,"No results")):r.a.createElement("ul",{className:"popupList"},e.planetList.map(function(t){return r.a.createElement("li",{key:t.url.slice(29,-1),onClick:function(){return e.clickHandler(t.name)}},function(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase()),a={first:e.slice(0,n),second:e.slice(n,n+t.length),third:e.slice(n+t.length)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,a.first),r.a.createElement("b",null,a.second),r.a.createElement("span",null,a.third))}(t.name,e.inputValue))}))};function D(e){var t=Object(a.useRef)(null);return function(e,t,n){function r(e){n.includes(e.keyCode)&&t()}function c(n){e.current&&!e.current.contains(n.target)&&t()}Object(a.useEffect)(function(){return document.addEventListener("mousedown",c),document.addEventListener("keydown",r),function(){document.removeEventListener("mousedown",c),document.removeEventListener("keydown",r)}})}(t,e.outsideClickLogic,e.keyCodes),r.a.createElement("div",{className:e.className,style:e.style,ref:t},e.children)}var S=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).setInputText=function(e){n.props.setAutocompleteOption(e)},n.ESCAPE_KEY_CODE=27,n}return Object(L.a)(t,e),Object(x.a)(t,[{key:"calculatePosition",value:function(){return{top:"".concat(this.props.inputRef.bottom,"px"),left:"".concat(this.props.inputRef.left,"px")}}},{key:"render",value:function(){var e=this;if(!this.props.isOpen||!this.props.searchInputValue)return null;return r.a.createElement(D,{className:"listContainer",style:{top:"".concat(e.props.inputRef.bottom,"px"),left:"".concat(e.props.inputRef.left,"px"),width:"".concat(e.props.inputRef.width,"px")},outsideClickLogic:this.props.popupOutsideClick,keyCodes:[this.ESCAPE_KEY_CODE]},r.a.createElement(F,{planetList:this.props.autocompletePlanets,clickHandler:this.props.setAutocompleteOption,inputValue:this.props.searchInputValue,isFetching:this.props.isFetching,isOpen:this.props.isOpen}))}}]),t}(a.PureComponent),U={inputChange:k,popupOutsideClick:function(){return{type:"POPUP_OUTSIDE_CLICKED"}},setAutocompleteOption:function(e){return{type:"AUTOCOMPLETE_OPTION_CLICKED",payload:e}}},H=Object(I.b)(function(e){return{autocompletePlanets:e.autocompletePlanets,searchInputValue:e.searchInputValue,isFetching:e.isFetching,isOpen:e.isAutocompleteListOpen,inputRef:e.inputRef}},U)(S),V=function(e){function t(){return Object(A.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("h1",null,"Loading...")},r.a.createElement("form",{className:"SearchBox",action:"javascript:;",autoComplete:"off"},r.a.createElement(w,null),r.a.createElement(H,null))))}}]),t}(a.Component);s.a.render(r.a.createElement(I.a,{store:_},r.a.createElement(V,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.f2aaa502.chunk.js.map