(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(38)},34:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(16),s=n.n(c),u=n(7),i=n(23),o=n.n(i),p={inputRef:{},autocompletePlanets:[],searchInputValue:"",isFetching:!1,isAutocompleteListOpen:!1};var l=n(24),h=n.n(l),E=n(26),f=n(5),m=n.n(f),O=n(4),b=m.a.mark(g),d=m.a.mark(v),C=m.a.mark(T),P=m.a.mark(j);function g(){var e,t;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(O.h)("INPUT_CHANGED");case 3:if(!(e=n.sent).searchInputValue.trim()){n.next=14;break}return n.next=7,Object(O.f)(T,e);case 7:return t=n.sent,n.next=10,Object(O.h)(["INPUT_CLEARED","INPUT_CHANGE","POPUP_OUTSIDE_CLICKED"]);case 10:return n.next=12,Object(O.c)(t);case 12:n.next=16;break;case 14:return n.next=16,Object(O.g)({type:"INPUT_EMPTY"});case 16:n.next=0;break;case 18:case"end":return n.stop()}},b)}function v(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(O.h)("INPUT_CHANGE");case 3:return e=t.sent,t.next=6,Object(O.g)({type:"INPUT_CHANGED",searchInputValue:e.searchInputValue});case 6:t.next=0;break;case 8:case"end":return t.stop()}},d)}function T(e){var t,n,a;return m.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,t=!0,n=m.a.mark(function n(){var a,r,c;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.searchInputValue){n.next=2;break}return n.abrupt("return",{v:void 0});case 2:return n.next=4,Object(O.e)(400);case 4:a="https://swapi.co/api/planets/?search=".concat(e.searchInputValue.trim()),r=!0;case 5:if(!r){n.next=16;break}return n.next=8,Object(O.g)({type:"PLANETS_PAGE_FETCH_START"});case 8:return n.next=10,Object(O.b)(function(){return fetch(a).then(function(e){return e.json()})});case 10:return c=n.sent,n.next=13,Object(O.g)({type:"PLANETS_PAGE_FETCHED",autocompletePlanets:c.results});case 13:c.next?a=c.next:r=!1,n.next=5;break;case 16:return n.next=18,Object(O.g)({type:"ALL_PLANETS_FETCHED"});case 18:t=!1;case 19:case"end":return n.stop()}},n)});case 3:if(!t){r.next=10;break}return r.delegateYield(n(),"t0",5);case 5:if("object"!==typeof(a=r.t0)){r.next=8;break}return r.abrupt("return",a.v);case 8:r.next=3;break;case 10:r.next=16;break;case 12:return r.prev=12,r.t1=r.catch(0),r.next=16,Object(O.g)({type:"PLANET_FETCH_ERRORED",e:r.t1});case 16:return r.prev=16,r.next=19,Object(O.d)();case 19:if(!r.sent){r.next=22;break}return r.next=22,Object(O.g)({type:"PLANET_FETCH_ABORTED"});case 22:return r.finish(16);case 23:case"end":return r.stop()}},C,null,[[0,12,16,23]])}function j(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([g(),v()]);case 2:case"end":return e.stop()}},P)}var _=Object(E.a)(),I=Object(u.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_CHANGED":return Object.assign({},e,{searchInputValue:t.searchInputValue,isFetching:!0,autocompletePlanets:[]});case"INPUT_EMPTY":return Object.assign({},e,{isFetching:!1});case"INPUT_CLEARED":return Object.assign({},e,{searchInputValue:""});case"POPUP_OUTSIDE_CLICKED":return Object.assign({},e,{isAutocompleteListOpen:!1});case"PLANETS_PAGE_FETCH_START":return Object.assign({},e,{isAutocompleteListOpen:!0});case"PLANETS_PAGE_FETCHED":return Object.assign({},e,{autocompletePlanets:o()(e.autocompletePlanets,{$push:t.autocompletePlanets})});case"ALL_PLANETS_FETCHED":return Object.assign({},e,{isFetching:!1,isAutocompleteListOpen:!0});case"PLANET_FETCH_ABORTED":return Object.assign({},e,{isFetching:!1,autocompletePlanets:[]});case"PLANET_FETCH_ERRORED":return Object.assign({},e,{isFetching:!1,autocompletePlanets:["Error"]});case"INPUT_REF_CREATED":return Object.assign({},e,{inputRef:t.ref});case"AUTOCOMPLETE_OPTION_CLICKED":return Object.assign({},e,{searchInputValue:t.option,autocompletePlanets:[],isAutocompleteListOpen:!1});default:return e}},p,Object(u.a)(_,h.a));_.run(j);n(34);var A=n(10),x=n(11),L=n(14),k=n(12),N=n(15),R=n(13),y=function(e){return{type:"INPUT_CHANGE",searchInputValue:e}},w=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(L.a)(this,Object(k.a)(t).call(this,e))).handleInput=function(e){e.target.value?n.props.inputChange(e.target.value):n.props.inputChange("")},n.handleClick=function(e){n.props.inputClear(),n.inputRef.current.focus()},n.inputRef=r.a.createRef(),n.state={active:!0},n}return Object(N.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus(),this.props.pushAutocompleteRef(this.inputRef.current.getBoundingClientRect()),window.a=this.inputRef.current}},{key:"render",value:function(){var e=this,t=this.state.active||this.props.searchInputValue;return r.a.createElement("div",{className:"field ".concat(t?"active":"")},r.a.createElement("input",{ref:this.inputRef,type:"text",id:"searchInput",value:this.props.searchInputValue,onChange:this.handleInput,onFocus:function(){return e.setState({active:!0})},onBlur:function(){return e.setState({active:!1})},placeholder:this.state.active?"":"Star Wars Planets"}),r.a.createElement("label",{htmlFor:"searchInput"},"Star Wars Planets"),this.props.searchInputValue&&r.a.createElement("button",{onClick:this.handleClick,className:"close"}),this.props.isFetching&&r.a.createElement("div",{className:"spinner"}))}}]),t}(a.Component),F={inputChange:y,inputClear:function(){return{type:"INPUT_CLEARED"}},pushAutocompleteRef:function(e){return{type:"INPUT_REF_CREATED",ref:e}}},D=Object(R.b)(function(e){return{searchInputValue:e.searchInputValue,isFetching:e.isFetching}},F)(w);var V=function(e){return"Error"===e.planetList[0]?r.a.createElement("ul",null,r.a.createElement("li",null,"Something went wrong")):e.isFetching?null:0===e.planetList.length?r.a.createElement("ul",null,r.a.createElement("li",null,"No results")):r.a.createElement("ul",{className:"popupList"},e.planetList.map(function(t){return r.a.createElement("li",{key:t.url.slice(29,-1),onClick:function(){return e.clickHandler(t.name)}},function(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase()),a={first:e.slice(0,n),second:e.slice(n,n+t.length),third:e.slice(n+t.length)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,a.first),r.a.createElement("b",null,a.second),r.a.createElement("span",null,a.third))}(t.name,e.inputValue))}))};function S(e){var t=Object(a.useRef)(null);return function(e,t,n){function r(e){n.includes(e.keyCode)&&t()}function c(n){e.current&&!e.current.contains(n.target)&&t()}Object(a.useEffect)(function(){return document.addEventListener("mousedown",c),document.addEventListener("keydown",r),function(){document.removeEventListener("mousedown",c),document.removeEventListener("keydown",r)}})}(t,e.outsideClickLogic,e.keyCodes),r.a.createElement("div",{className:e.className,style:e.style,ref:t},e.children)}var U=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(L.a)(this,Object(k.a)(t).call(this,e))).setInputText=function(e){n.props.setAutocompleteOption(e)},n.ESCAPE_KEY_CODE=27,n}return Object(N.a)(t,e),Object(x.a)(t,[{key:"calculatePosition",value:function(){return{top:"".concat(this.props.inputRef.bottom,"px"),left:"".concat(this.props.inputRef.left,"px")}}},{key:"render",value:function(){var e=this;if(!this.props.isOpen||!this.props.searchInputValue)return null;return r.a.createElement(S,{className:"listContainer",style:{top:"".concat(e.props.inputRef.bottom,"px"),left:"".concat(e.props.inputRef.left,"px"),width:"".concat(e.props.inputRef.width,"px")},outsideClickLogic:this.props.popupOutsideClick,keyCodes:[this.ESCAPE_KEY_CODE]},r.a.createElement(V,{planetList:this.props.autocompletePlanets,clickHandler:this.props.setAutocompleteOption,inputValue:this.props.searchInputValue,isFetching:this.props.isFetching,isOpen:this.props.isOpen}))}}]),t}(a.PureComponent),H={inputChange:y,popupOutsideClick:function(){return{type:"POPUP_OUTSIDE_CLICKED"}},setAutocompleteOption:function(e){return{type:"AUTOCOMPLETE_OPTION_CLICKED",option:e}}},G=Object(R.b)(function(e){return{autocompletePlanets:e.autocompletePlanets,searchInputValue:e.searchInputValue,isFetching:e.isFetching,isOpen:e.isAutocompleteListOpen,inputRef:e.inputRef}},H)(U),K=function(e){function t(){return Object(A.a)(this,t),Object(L.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("h1",null,"Loading...")},r.a.createElement("form",{className:"SearchBox",action:"javascript:;",autoComplete:"off"},r.a.createElement(D,null),r.a.createElement(G,null))))}}]),t}(a.Component);s.a.render(r.a.createElement(R.a,{store:I},r.a.createElement(K,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b70aa3ab.chunk.js.map